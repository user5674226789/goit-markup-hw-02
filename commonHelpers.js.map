{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '43046447-8272f873c9098dbfa2cb53d4e';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImg(request, page, perPage) {\n  try {\n    const res = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: request,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n      },\n    });\n    return res.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","import iziToast from 'izitoast';\nimport { refs, lightbox } from '../main';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function renderImg(arr) {\n  if (arr.length === 0) {\n    iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n    });\n  } else {\n    const markup = arr\n      .map(\n        photo =>\n          `<li class=\"photos-block\">\n            <a class=\"photos-link\" href=\"${photo.largeImageURL}\">\n            <img class=\"photo\" src=\"${photo.webformatURL}\" alt=\"${photo.tags}\"/>\n            </a>\n            <ul class=\"photo-data\">\n            <li class=\"photo-data-detail\"><p><span class=\"info\">Likes</span></br>${photo.likes}</p></li>\n            <li class=\"photo-data-detail\"><p><span class=\"info\">Views</span></br>${photo.views}</p></li>\n            <li class=\"photo-data-detail\"><p><span class=\"info\">Comments</span></br>${photo.comments}</p></li>\n            <li class=\"photo-data-detail\"><p><span class=\"info\">Downloads</span></br>${photo.downloads}</p></li>\n            </ul>\n            </li>`\n      )\n      .join('');\n    refs.galleryList.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n  }\n}\n","import { fetchImg } from './js/pixabay-api';\r\nimport { renderImg } from './js/render-functions';\r\nimport SimpleLightbox from 'simplelightbox';\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\n\r\nexport const refs = {\r\n  searchForm: document.querySelector('.search-form'),\r\n  inputElement: document.querySelector('.search-input'),\r\n  load: document.querySelector('.load'),\r\n  galleryList: document.querySelector('.gallery'),\r\n  loader: document.querySelector('.loader'),\r\n};\r\n\r\nexport const lightbox = new SimpleLightbox('.gallery a', {\r\n  captionsData: 'alt',\r\n  captionDelay: 250,\r\n});\r\n\r\nhideLoader();\r\nlet searchTerm;\r\nlet pageCounter = 1;\r\nconst perPage = 15;\r\n\r\nrefs.searchForm.addEventListener('submit', submitHandle);\r\nasync function submitHandle(e) {\r\n  e.preventDefault();\r\n  searchTerm = refs.inputElement.value.trim();\r\n  pageCounter = 1;\r\n  refs.galleryList.innerHTML = '';\r\n  if (searchTerm === '') {\r\n    iziToast.error({\r\n      title: 'Error',\r\n      message: 'Please enter a search term.',\r\n      position: 'topRight',\r\n    });\r\n    hideLoadMoreBtn();\r\n    return;\r\n  }\r\n  showLoader();\r\n  try {\r\n    const images = await fetchImg(searchTerm, pageCounter, perPage);\r\n    const totalHits = images.totalHits;\r\n    if (images.hits.length === 0) {\r\n      refs.galleryList.innerHTML = '';\r\n      iziToast.info({\r\n        title: 'Info',\r\n        message:\r\n          'Sorry, there are no images matching your search query. Please try again!',\r\n        position: 'topRight',\r\n      });\r\n      hideLoadMoreBtn();\r\n      return;\r\n    } else {\r\n      renderImg(images.hits);\r\n      refs.inputElement.value = '';\r\n      showLoadMoreBtn();\r\n    }\r\n    if (perPage * pageCounter >= totalHits) {\r\n      hideLoadMoreBtn();\r\n      endList();\r\n    }\r\n  } catch (error) {\r\n    console.error('Error fetching images:', error);\r\n    iziToast.error({\r\n      title: 'Error',\r\n      message: 'Failed to fetch images. Please try again later.',\r\n      position: 'topRight',\r\n    });\r\n  } finally {\r\n    hideLoader();\r\n  }\r\n}\r\n\r\nrefs.load.addEventListener('click', async () => {\r\n  try {\r\n    if (refs.load) {\r\n      pageCounter += 1;\r\n    }\r\n    const images = await fetchImg(searchTerm, pageCounter, perPage);\r\n    const totalHits = images.totalHits;\r\n    renderImg(images.hits);\r\n    showLoader();\r\n    if (perPage * pageCounter >= totalHits) {\r\n      hideLoadMoreBtn();\r\n      endList();\r\n    }\r\n    const galleryCardHeight =\r\n      refs.galleryList.firstElementChild.getBoundingClientRect().height;\r\n    window.scrollBy({ top: galleryCardHeight * 3, behavior: 'smooth' });\r\n  } catch (error) {\r\n    console.error('Error fetching more images:', error);\r\n    iziToast.error({\r\n      title: 'Error',\r\n      message: `Error fetching more images: ${error}`,\r\n    });\r\n  } finally {\r\n    hideLoader();\r\n  }\r\n});\r\n\r\nfunction showLoader() {\r\n  refs.loader.classList.remove('hidden');\r\n}\r\n\r\nfunction hideLoader() {\r\n  refs.loader.classList.add('hidden');\r\n}\r\n\r\nfunction showLoadMoreBtn() {\r\n  refs.load.style.display = 'block';\r\n}\r\n\r\nfunction hideLoadMoreBtn() {\r\n  refs.load.style.display = 'none';\r\n}\r\n\r\nfunction endList() {\r\n  hideLoadMoreBtn();\r\n  iziToast.error({\r\n    title: 'Error',\r\n    message: \"We're sorry, but you've reached the end of search results.\",\r\n    position: 'topRight',\r\n  });\r\n}\r\n"],"names":["API_KEY","BASE_URL","fetchImg","request","page","perPage","axios","error","renderImg","arr","iziToast","markup","photo","refs","lightbox","SimpleLightbox","hideLoader","searchTerm","pageCounter","submitHandle","e","hideLoadMoreBtn","showLoader","images","totalHits","showLoadMoreBtn","endList","galleryCardHeight"],"mappings":"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"}
{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\n\r\nexport const refs = {\r\n  searchForm: document.querySelector('.search-form'),\r\n  inputElement: document.querySelector('.search-input'),\r\n  galleryList: document.querySelector('.gallery'),\r\n  loader: document.querySelector('.loader'),\r\n};\r\n\r\nexport const lightbox = new SimpleLightbox('.gallery a', {\r\n  captionsData: 'alt',\r\n  captionDelay: 250,\r\n});\r\n\r\nhideLoader();\r\nlet searchTerm;\r\nlet pageCounter = 1;\r\nconst perPage = 15;\r\n\r\nrefs.searchForm.addEventListener('submit', submitHandle);\r\nasync function submitHandle(e) {\r\n  e.preventDefault();\r\n  searchTerm = refs.inputElement.value.trim();\r\n  pageCounter = 1;\r\n  refs.galleryList.innerHTML = '';\r\n  if (searchTerm === '') {\r\n    iziToast.error({\r\n      title: 'Error',\r\n      message: 'Please enter a search term.',\r\n      position: 'topRight',\r\n    });\r\n    hideLoadMoreBtn();\r\n    return;\r\n  }\r\n  showLoader();\r\n  try {\r\n    const images = await fetchImg(searchTerm, pageCounter, perPage);\r\n    const totalHits = images.totalHits;\r\n    if (images.hits.length === 0) {\r\n      refs.galleryList.innerHTML = '';\r\n      iziToast.info({\r\n        title: 'Info',\r\n        message:\r\n          'Sorry, there are no images matching your search query. Please try again!',\r\n        position: 'topRight',\r\n      });\r\n      hideLoadMoreBtn();\r\n      return;\r\n    } else {\r\n      renderImg(images.hits);\r\n      refs.inputElement.value = '';\r\n      showLoadMoreBtn();\r\n    }\r\n    if (perPage * pageCounter >= totalHits) {\r\n      hideLoadMoreBtn();\r\n      endList();\r\n    }\r\n  } catch (error) {\r\n    console.error('Error fetching images:', error);\r\n    iziToast.error({\r\n      title: 'Error',\r\n      message: 'Failed to fetch images. Please try again later.',\r\n      position: 'topRight',\r\n    });\r\n  } finally {\r\n    hideLoader();\r\n  }\r\n}\r\n\r\nrefs.load.addEventListener('click', async () => {\r\n  try {\r\n    if (refs.load) {\r\n      pageCounter += 1;\r\n    }\r\n    const images = await fetchImg(searchTerm, pageCounter, perPage);\r\n    const totalHits = images.totalHits;\r\n    renderImg(images.hits);\r\n    showLoader();\r\n    if (perPage * pageCounter >= totalHits) {\r\n      hideLoadMoreBtn();\r\n      endList();\r\n    }\r\n    const galleryCardHeight =\r\n      refs.galleryList.firstElementChild.getBoundingClientRect().height;\r\n    window.scrollBy({ top: galleryCardHeight * 3, behavior: 'smooth' });\r\n  } catch (error) {\r\n    console.error('Error fetching more images:', error);\r\n    iziToast.error({\r\n      title: 'Error',\r\n      message: `Error fetching more images: ${error}`,\r\n    });\r\n  } finally {\r\n    hideLoader();\r\n  }\r\n});\r\n\r\nfunction showLoadMore() {\r\n  refs.btnShowMore.classList.remove('hidden');\r\n}\r\n\r\nfunction hideLoadMore() {\r\n  refs.btnShowMore.classList.add('hidden');\r\n}\r\n\r\nfunction showLoader() {\r\n  refs.loader.classList.remove('hidden');\r\n}\r\n\r\nfunction hideLoader() {\r\n  refs.loader.classList.add('hidden');\r\n}\r\n\r\nfunction checkBtnStatus() {\r\n  if (currentPage >= maxPage) {\r\n    hideLoadMore();\r\n  } else {\r\n    showLoadMore();\r\n  }\r\n}\r\nfunction myScroll() {\r\n    scrollBy({\r\n        \"top\": 1000,\r\n         behavior: \"smooth\"\r\n    })\r\n}\r\nfunction endList() {\r\n  hideLoadMoreBtn();\r\n  iziToast.error({\r\n    title: 'Error',\r\n    message: \"We're sorry, but you've reached the end of search results.\",\r\n    position: 'topRight',\r\n  });\r\n}\r\n"],"names":["refs","SimpleLightbox","hideLoader","searchTerm","pageCounter","perPage","submitHandle","e","iziToast","showLoader","images","totalHits","endList","error","galleryCardHeight"],"mappings":"6vBAKO,MAAMA,EAAO,CAClB,WAAY,SAAS,cAAc,cAAc,EACjD,aAAc,SAAS,cAAc,eAAe,EACpD,YAAa,SAAS,cAAc,UAAU,EAC9C,OAAQ,SAAS,cAAc,SAAS,CAC1C,EAEwB,IAAIC,EAAe,aAAc,CACvD,aAAc,MACd,aAAc,GAChB,CAAC,EAEDC,IACA,IAAIC,EACAC,EAAc,EAClB,MAAMC,EAAU,GAEhBL,EAAK,WAAW,iBAAiB,SAAUM,CAAY,EACvD,eAAeA,EAAaC,EAAG,CAK7B,GAJAA,EAAE,eAAc,EAChBJ,EAAaH,EAAK,aAAa,MAAM,KAAI,EACzCI,EAAc,EACdJ,EAAK,YAAY,UAAY,GACzBG,IAAe,GAAI,CACrBK,EAAS,MAAM,CACb,MAAO,QACP,QAAS,8BACT,SAAU,UAChB,CAAK,EACD,kBACA,MACD,CACDC,IACA,GAAI,CACF,MAAMC,EAAS,MAAM,SAASP,EAAYC,EAAaC,CAAO,EACxDM,EAAYD,EAAO,UACzB,GAAIA,EAAO,KAAK,SAAW,EAAG,CAC5BV,EAAK,YAAY,UAAY,GAC7BQ,EAAS,KAAK,CACZ,MAAO,OACP,QACE,2EACF,SAAU,UAClB,CAAO,EACD,kBACA,MACN,MACM,UAAUE,EAAO,IAAI,EACrBV,EAAK,aAAa,MAAQ,GAC1B,kBAEEK,EAAUD,GAAeO,IAC3B,kBACAC,IAEH,OAAQC,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7CL,EAAS,MAAM,CACb,MAAO,QACP,QAAS,kDACT,SAAU,UAChB,CAAK,CACL,QAAY,CACRN,GACD,CACH,CAEAF,EAAK,KAAK,iBAAiB,QAAS,SAAY,CAC9C,GAAI,CACEA,EAAK,OACPI,GAAe,GAEjB,MAAMM,EAAS,MAAM,SAASP,EAAYC,EAAaC,CAAO,EACxDM,EAAYD,EAAO,UACzB,UAAUA,EAAO,IAAI,EACrBD,IACIJ,EAAUD,GAAeO,IAC3B,kBACAC,KAEF,MAAME,EACJd,EAAK,YAAY,kBAAkB,sBAAqB,EAAG,OAC7D,OAAO,SAAS,CAAE,IAAKc,EAAoB,EAAG,SAAU,QAAQ,CAAE,CACnE,OAAQD,EAAO,CACd,QAAQ,MAAM,8BAA+BA,CAAK,EAClDL,EAAS,MAAM,CACb,MAAO,QACP,QAAS,+BAA+BK,CAAK,EACnD,CAAK,CACL,QAAY,CACRX,GACD,CACH,CAAC,EAUD,SAASO,GAAa,CACpBT,EAAK,OAAO,UAAU,OAAO,QAAQ,CACvC,CAEA,SAASE,GAAa,CACpBF,EAAK,OAAO,UAAU,IAAI,QAAQ,CACpC,CAeA,SAASY,GAAU,CACjB,kBACAJ,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6DACT,SAAU,UACd,CAAG,CACH"}
{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function renderImages(imagesArr) {\n    return imagesArr\n      .map(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => {\n          return `<li class=\"list-item\">\n       <a class=\"gallery-link\" href =\"${largeImageURL}\">\n       <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\"\n       </a>\n       \n        <ul class=\"information-list\">\n          <li class=\"item-information-container\">\n            <h2 class=\"main-info\"> Likes </h2>\n              <p class=\"info\">${likes}</p>\n            \n          </li>\n          <li class=\"item-information-container\">\n            <h2 class=\"main-info\"> Views </h2>\n              <p class=\"info\">${views}</p>\n            \n          </li>\n          <li class=\"item-information-container\">\n            <h2 class=\"main-info\"> Comments </h2>\n              <p class=\"info\">${comments}</p>\n            \n          </li>\n          <li class=\"item-information-container\">\n            <h2 class=\"main-info\"> Downloads </h2>\n              <p class=\"info\">${downloads}</p>\n          </li>\n        </ul>\n     \n      </li>`;\n        }\n      )\n      .join('');\n  }\n","import axios from \"axios\";\n\nexport async function getImages(query, currentPage) {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const params = {\n      key: '43180958-6b06a0884e2ebb29e4f1cb8bf',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      per_page: 15,\n      page: currentPage,\n    };\n    try {\n      const res = await axios.get(BASE_URL, {params});\n      return res.data\n    } catch (error) {\n        console.error('Error occurred while fetching images:', error);\n        throw error;\n      };\n  }\n","import { renderImages } from './js/render-functions';\r\nimport SimpleLightbox from 'simplelightbox';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\nimport { getImages } from './js/pixabay-api'; // Виправлено імпорт функції для отримання зображень з API\r\n\r\nlet query;\r\nlet currentPage = 1;\r\nlet maxPage = 0;\r\nconst pageSize = 15;\r\n\r\nexport const refs = {\r\n  searchForm: document.querySelector('.js-search-form'),\r\n  btnShowMore: document.querySelector('.btn-show-more'), \r\n  imagesContainer: document.querySelector('.js-images-container'),\r\n  loader: document.querySelector('.loader'),\r\n};\r\n\r\nrefs.searchForm.addEventListener('submit', onFormSubmit);\r\n\r\nasync function onFormSubmit(e) {\r\n  e.preventDefault();\r\n  query = e.target.elements.query.value.trim();\r\n  refs.imagesContainer.innerHTML = '';\r\n\r\n  currentPage = 1;\r\n  maxPage = 0;\r\n  showLoader();\r\n  try {\r\n    const data = await getImages(query, currentPage); // Викликати функцію для отримання зображень з API\r\n\r\n    if (!checkValidity(query, data.hits)) {\r\n      hideLoader();\r\n      hideLoadMore(); \r\n      return;\r\n    }\r\n\r\n    maxPage = Math.ceil(data.totalHits / pageSize);\r\n    renderImages(data.hits);\r\n    hideLoader();\r\n    checkBtnStatus();\r\n    e.target.reset();\r\n  } catch (error) {\r\n    console.error(error);\r\n    hideLoader();\r\n  }\r\n}\r\n\r\nasync function onLoadMoreClick() {\r\n  currentPage += 1;\r\n  showLoader();\r\n\r\n  try {\r\n    const data = await getImages(query, currentPage); // Викликати функцію для отримання зображень з API\r\n    renderImages(data.hits);\r\n    \r\n    if (currentPage >= maxPage) {\r\n      hideLoadMore();\r\n      iziToast.show({\r\n        color: 'green',\r\n        message: `Sorry, you have reached the end of collection.`,\r\n        position: 'topCenter',\r\n        timeout: 3000,\r\n      });\r\n    }\r\n  } catch (err) {\r\n    console.log(err);\r\n  }\r\n  myScroll();\r\n  hideLoader();\r\n  checkBtnStatus();\r\n}\r\n\r\nfunction checkValidity(query, hits) {\r\n  if (!query.trim()) {\r\n    iziToast.show({\r\n      color: 'black',\r\n      message: `Sorry, the input field must be filled in to start the photo search.`,\r\n      position: 'topCenter',\r\n      timeout: 3000,\r\n    });\r\n    return false;\r\n  } else if (hits.length === 0) {\r\n    iziToast.show({\r\n      color: 'red',\r\n      message: `Sorry, there are no images matching your search query. Please try again!`,\r\n      position: 'topCenter',\r\n      timeout: 3000,\r\n    });\r\n    return false;\r\n  }\r\n  return true;\r\n}\r\n\r\nfunction showLoadMore() {\r\n  refs.btnShowMore.classList.remove('hidden');\r\n}\r\n\r\nfunction hideLoadMore() {\r\n  refs.btnShowMore.classList.add('hidden');\r\n}\r\n\r\nfunction showLoader() {\r\n  refs.loader.classList.remove('hidden');\r\n}\r\n\r\nfunction hideLoader() {\r\n  refs.loader.classList.add('hidden');\r\n}\r\n\r\nfunction checkBtnStatus() {\r\n  if (currentPage >= maxPage) {\r\n    hideLoadMore();\r\n  } else {\r\n    showLoadMore();\r\n  }\r\n}\r\n\r\nfunction myScroll() {\r\n  const container = document.querySelector('.js-images-container');\r\n  const scrollAmount = container.scrollHeight;\r\n  container.scrollTo({\r\n    top: scrollAmount,\r\n    behavior: 'smooth'\r\n  });\r\n}\r\n\r\n\r\n\r\n\r\n"],"names":["renderImages","imagesArr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","getImages","query","currentPage","BASE_URL","params","axios","error","maxPage","pageSize","refs","onFormSubmit","e","showLoader","data","checkValidity","hideLoader","hideLoadMore","checkBtnStatus","hits","iziToast","showLoadMore"],"mappings":"6vBAAO,SAASA,EAAaC,EAAW,CACpC,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACV,IACiB;AAAA,wCACuBL,CAAa;AAAA,mBAClCD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAMbC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA,gCAKLC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA,gCAKLC,CAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,gCAKRC,CAAS;AAAA;AAAA;AAAA;AAAA,YAMlC,EACA,KAAK,EAAE,CACd,CCzCO,eAAeC,EAAUC,EAAOC,EAAa,CAChD,MAAMC,EAAW,2BACXC,EAAS,CACb,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,GACV,KAAMC,CACZ,EACI,GAAI,CAEF,OADY,MAAMG,EAAM,IAAIF,EAAU,CAAC,OAAAC,CAAM,CAAC,GACnC,IACZ,OAAQE,EAAO,CACZ,cAAQ,MAAM,wCAAyCA,CAAK,EACtDA,CAEd,CAAA,CCbA,IAAIL,EACAC,EAAc,EACdK,EAAU,EACd,MAAMC,EAAW,GAEJC,EAAO,CAClB,WAAY,SAAS,cAAc,iBAAiB,EACpD,YAAa,SAAS,cAAc,gBAAgB,EACpD,gBAAiB,SAAS,cAAc,sBAAsB,EAC9D,OAAQ,SAAS,cAAc,SAAS,CAC1C,EAEAA,EAAK,WAAW,iBAAiB,SAAUC,CAAY,EAEvD,eAAeA,EAAaC,EAAG,CAC7BA,EAAE,eAAc,EAChBV,EAAQU,EAAE,OAAO,SAAS,MAAM,MAAM,OACtCF,EAAK,gBAAgB,UAAY,GAEjCP,EAAc,EACdK,EAAU,EACVK,IACA,GAAI,CACF,MAAMC,EAAO,MAAMb,EAAUC,EAAOC,CAAW,EAE/C,GAAI,CAACY,EAAcb,EAAOY,EAAK,IAAI,EAAG,CACpCE,IACAC,IACA,MACD,CAEDT,EAAU,KAAK,KAAKM,EAAK,UAAYL,CAAQ,EAC7CjB,EAAasB,EAAK,IAAI,EACtBE,IACAE,IACAN,EAAE,OAAO,OACV,OAAQL,EAAO,CACd,QAAQ,MAAMA,CAAK,EACnBS,GACD,CACH,CA2BA,SAASD,EAAcb,EAAOiB,EAAM,CAClC,GAAKjB,EAAM,QAQJ,GAAIiB,EAAK,SAAW,EACzB,OAAAC,EAAS,KAAK,CACZ,MAAO,MACP,QAAS,2EACT,SAAU,YACV,QAAS,GACf,CAAK,EACM,OAdP,QAAAA,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,sEACT,SAAU,YACV,QAAS,GACf,CAAK,EACM,GAUT,MAAO,EACT,CAEA,SAASC,GAAe,CACtBX,EAAK,YAAY,UAAU,OAAO,QAAQ,CAC5C,CAEA,SAASO,GAAe,CACtBP,EAAK,YAAY,UAAU,IAAI,QAAQ,CACzC,CAEA,SAASG,GAAa,CACpBH,EAAK,OAAO,UAAU,OAAO,QAAQ,CACvC,CAEA,SAASM,GAAa,CACpBN,EAAK,OAAO,UAAU,IAAI,QAAQ,CACpC,CAEA,SAASQ,GAAiB,CACpBf,GAAeK,EACjBS,IAEAI,GAEJ"}
{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function getImages(query, currentPage) {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const params = {\n      key: '43180958-6b06a0884e2ebb29e4f1cb8bf',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      per_page: 15,\n      page: currentPage,\n    };\n    try {\n      const res = await axios.get(BASE_URL, {params});\n      return res.data\n    } catch (error) {\n        console.error('Error occurred while fetching images:', error);\n        throw error;\n      };\n  }\n","export function renderImages(imagesArr) {\n    return imagesArr\n      .map(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => {\n          return `<li class=\"list-item\">\n       <a class=\"gallery-link\" href =\"${largeImageURL}\">\n       <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\"\n       </a>\n       \n        <ul class=\"information-list\">\n          <li class=\"item-information-container\">\n            <h2 class=\"main-info\"> Likes </h2>\n              <p class=\"info\">${likes}</p>\n            \n          </li>\n          <li class=\"item-information-container\">\n            <h2 class=\"main-info\"> Views </h2>\n              <p class=\"info\">${views}</p>\n            \n          </li>\n          <li class=\"item-information-container\">\n            <h2 class=\"main-info\"> Comments </h2>\n              <p class=\"info\">${comments}</p>\n            \n          </li>\n          <li class=\"item-information-container\">\n            <h2 class=\"main-info\"> Downloads </h2>\n              <p class=\"info\">${downloads}</p>\n          </li>\n        </ul>\n     \n      </li>`;\n        }\n      )\n      .join('');\n  }\n","import axios from 'axios';\r\nimport iziToast from \"izitoast\";\r\nimport \"izitoast/dist/css/iziToast.min.css\";\r\nimport SimpleLightbox from 'simplelightbox';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\n\r\nimport { getImages } from './js/pixabay-api';\r\nimport { renderImages } from './js/render-functions';\r\n\r\nlet query;\r\nlet currentPage = 1;\r\nlet maxPage = 0;\r\nconst pageSize = 15;\r\n\r\n\r\nconst form = document.querySelector('.search-form');\r\nconst list = document.querySelector('.list');\r\nconst load = document.querySelector('.loader');\r\nconst btnLoadMore = document.querySelector('.btn-load-more');\r\n\r\n\r\nform.addEventListener('submit', handleImages);\r\n\r\nasync function handleImages(event) {\r\n    event.preventDefault();\r\n    query = event.target.elements.search.value.trim();\r\n    list.innerHTML = \"\";\r\n    currentPage = 1;\r\n    showLoader();\r\n    if (query === '') {\r\n      iziToast.error({\r\n        backgroundColor: 'lightred',\r\n        icon: false,\r\n        progressBar: false,\r\n        close: false,\r\n        position: 'topRight',\r\n        message: 'Please, fill the field!',\r\n      });\r\n      return;\r\n    }\r\n    try {\r\n      const data = await getImages(query, currentPage);\r\n      maxPage = Math.ceil(data.totalHits / pageSize);\r\n      renderImages(data.hits);\r\n    showLoader ();\r\n        if (data.hits && data.hits.length === 0) {\r\n          iziToast.error({\r\n            backgroundColor: 'red',\r\n            progressBar: false,\r\n            close: false,\r\n            position: 'topRight',\r\n            message:\r\n              'Sorry, there are no images matching your search query. Please try again!',\r\n          });\r\n        }\r\n        const markup = renderImages(data.hits);\r\n        list.innerHTML = markup;\r\n        const lightbox = new SimpleLightbox('.gallery-link', {\r\n          captionsData: 'alt',\r\n          captionDelay: 250,\r\n        });\r\n        lightbox.refresh();\r\n      \r\n      } catch (error) {\r\n        console.error('Error occurred while fetching images:', error);\r\n        iziToast.error({\r\n          backgroundColor: 'red',\r\n          icon: false,\r\n          progressBar: false,\r\n          close: false,\r\n          position: 'topRight',\r\n          message:\r\n            'Sorry, an error occurred while fetching images. Please try again!',\r\n        });\r\n      }\r\n    hideLoader(); \r\n    event.target.reset();\r\n    checkBtnStatus();\r\n  }\r\n\r\n\r\nbtnLoadMore.addEventListener('click', onLoadMoreClick);\r\n\r\nasync function onLoadMoreClick(){\r\n  currentPage += 1;\r\nshowLoader();\r\ntry{\r\nconst data = await getImages(query, currentPage);\r\nlist.insertAdjacentHTML('beforeend', renderImages(data.hits));\r\nif (currentPage >= maxPage) {\r\n  iziToast.show({\r\n    color: 'green',\r\n    message: `We're sorry, but you've reached the end of search results.`,\r\n    position: 'topCenter',\r\n    timeout: 3000,\r\n  });\r\n}\r\n} catch (err) {\r\nconsole.log(err);\r\n}\r\nhideLoadMore();\r\nmyScroll();\r\nhideLoader();\r\ncheckBtnStatus();\r\n}\r\n//hideLoader();\r\n//hideLoadMore();\r\nfunction showLoadMore() {\r\n  btnLoadMore.classList.remove('hidden');\r\n}\r\nfunction hideLoadMore() {\r\n  btnLoadMore.classList.add('hidden');\r\n}\r\nfunction showLoader () {\r\n  load.classList.remove('hidden');\r\n}\r\nfunction hideLoader () {\r\n  load.classList.add('hidden');\r\n}\r\nfunction checkBtnStatus() {\r\n  if (currentPage >= maxPage) {\r\n    hideLoadMore();\r\n  } else {\r\n    showLoadMore();\r\n  }\r\n}\r\nfunction myScroll() {\r\n  const height = (list.firstChild.getBoundingClientRect().height);\r\n\r\n  window.scrollBy({\r\n      top: height*2 ,\r\n      behavior: 'smooth',\r\n  });\r\n}\r\n"],"names":["getImages","query","currentPage","BASE_URL","params","axios","error","renderImages","imagesArr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","maxPage","pageSize","form","list","load","btnLoadMore","handleImages","event","showLoader","iziToast","data","markup","SimpleLightbox","hideLoader","checkBtnStatus","onLoadMoreClick","err","hideLoadMore","myScroll","showLoadMore","height"],"mappings":"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"}
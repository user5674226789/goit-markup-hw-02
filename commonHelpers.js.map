{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport { refs, query, showLoader, currentPage, pageLimit} from \"../main\";\n\nconst myAxios = axios.create ({\n    baseURL: \"https://pixabay.com/api/\",\n})\n\nexport async function getImages() {\n    const params = {\n        key: \"43015885-c3997a91f23585149f1baaf72\",\n        q: query,\n        per_page: pageLimit,\n        page: currentPage,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n    };\n\n    showLoader();\n\n    const response = await myAxios.get(\"\", { params })\n    return response.data;\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { refs, lightbox, displayMessage } from '../main';\n\n\nexport function render(data) {\n    if (data.hits.length === 0) {\n        displayMessage(\n        'Sorry, there are no images matching your search query. Please try again!'\n        );\n    } else {\n        const images = data.hits;\n\n        const markup = images.map(image => \n            `<li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <img loading=\"lazy\" class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n                </a>\n                <div class=\"stats\">\n                    <p class=\"text\">Likes<br/>${image.likes}</p>\n                    <p class=\"text\">Views<br/>${image.views}</p>\n                    <p class=\"text\">Comments<br/>${image.comments}</p>\n                    <p class=\"text\">Downloads<br/>${image.downloads}</p>\n                </div>\n            </li>`).join('');\n\n    refs.gallery.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n    }\n}\n","import axios from \"axios\";\r\nimport iziToast from \"izitoast\";\r\nimport \"izitoast/dist/css/iziToast.min.css\";\r\nimport SimpleLightbox from \"simplelightbox\";\r\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\r\n\r\nimport { getImages } from \"./js/pixabay-api.js\";\r\nimport { render } from \"./js/render-functions.js\";\r\n\r\nexport const lightbox = new SimpleLightbox('.gallery-link', {\r\n    captionsData: \"alt\",\r\n    captionDelay: 250,\r\n});\r\n\r\nexport const refs = {\r\n    form: document.querySelector(\".form\"),\r\n    searchInput: document.getElementById(\"searchInput\"),\r\n    searchBtn: document.querySelector(\"button\"),\r\n    loadBtn: document.querySelector(\".load-more-button\"),\r\n    loader: document.querySelector(\".loader\"),\r\n    gallery: document.querySelector(\".gallery\"),\r\n}\r\n\r\n\r\nexport let query = \"\";\r\nexport let currentPage = 1;\r\nexport let pageLimit = 15;\r\n\r\nhideLoader();\r\nhideLoadBtn();\r\n\r\nrefs.form.addEventListener(\"submit\", async event => {\r\n    event.preventDefault();\r\n    currentPage = 1;\r\n    refs.gallery.innerHTML = \"\";\r\n    query = refs.searchInput.value.trim();\r\n    if (query !== '') {\r\n        try {\r\n            const data = await getImages(query, currentPage);\r\n            const maxPage = Math.ceil(data.totalHits / pageLimit);\r\n            render(data);\r\n            hideLoader();\r\n            if (currentPage >= maxPage) {\r\n                hideLoadBtn();\r\n            } else {\r\n                showLoadBtn();\r\n            }\r\n        } catch (error) {\r\n            console.log(error);\r\n            displayMessage(\"An error occurred while fetching data.\");\r\n            hideLoadBtn();\r\n        }\r\n    } else {\r\n        displayMessage(\"Empty field!\");\r\n        hideLoadBtn();\r\n    }\r\n    refs.form.reset();\r\n});\r\nrefs.loadBtn.addEventListener(\"click\", async onLoadMoreClick => {\r\n    currentPage += 1;\r\n    try {\r\n        const data = await getImages(query, currentPage);\r\n        hideLoader();\r\n        render(data);\r\n        showLoadBtn();\r\n        const item = document.querySelector(\".gallery-item\");\r\n        const rect = item.getBoundingClientRect();\r\n        window.scrollBy({\r\n            top: rect.height * 2,\r\n            behavior: \"smooth\",\r\n        })\r\n        const maxPage = Math.ceil(data.totalHits / pageLimit);\r\n        if (currentPage >= maxPage) {\r\n            hideLoadBtn();\r\n        }\r\n    } catch (error) {\r\n        console.log(error);\r\n        displayMessage(\"An error occurred while fetching data.\");\r\n        hideLoadBtn();\r\n    }\r\n});\r\n\r\n\r\nexport function displayMessage(message) {\r\n    iziToast.error({\r\n        title: 'Error',\r\n        message: message,\r\n        position: \"topRight\",\r\n        backgroundColor: \"red\",\r\n    });\r\n}\r\n\r\nexport function hideLoader() {\r\n    refs.loader.style.display = \"none\";\r\n}\r\n\r\nexport function showLoader() {\r\n    refs.loader.style.display = \"block\";\r\n}\r\n\r\nfunction hideLoadBtn() {\r\n    refs.loadBtn.style.display = \"none\";\r\n}\r\n\r\nfunction showLoadBtn() {\r\n    refs.loadBtn.style.display = \"block\";    \r\n}\r\n\r\n"],"names":["myAxios","axios","getImages","params","query","pageLimit","currentPage","showLoader","render","data","displayMessage","markup","image","refs","lightbox","SimpleLightbox","hideLoader","hideLoadBtn","event","maxPage","showLoadBtn","error","onLoadMoreClick","rect","message","iziToast"],"mappings":"owBAGA,MAAMA,EAAUC,EAAM,OAAQ,CAC1B,QAAS,0BACb,CAAC,EAEM,eAAeC,GAAY,CAC9B,MAAMC,EAAS,CACX,IAAK,qCACL,EAAGC,EACH,SAAUC,EACV,KAAMC,EACN,WAAY,QACZ,YAAa,aACb,WAAY,MACpB,EAEI,OAAAC,KAEiB,MAAMP,EAAQ,IAAI,GAAI,CAAE,OAAAG,EAAQ,GACjC,IACpB,CCdO,SAASK,EAAOC,EAAM,CACzB,GAAIA,EAAK,KAAK,SAAW,EACrBC,EACA,0EACR,MACW,CAGH,MAAMC,EAFSF,EAAK,KAEE,IAAIG,GACtB;AAAA,gDACoCA,EAAM,aAAa;AAAA,iEACFA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,gDAGvDA,EAAM,KAAK;AAAA,gDACXA,EAAM,KAAK;AAAA,mDACRA,EAAM,QAAQ;AAAA,oDACbA,EAAM,SAAS;AAAA;AAAA,kBAEjD,EAAE,KAAK,EAAE,EAEvBC,EAAK,QAAQ,mBAAmB,YAAaF,CAAM,EACnDG,EAAS,QAAO,CACf,CACL,CCvBO,MAAMA,EAAW,IAAIC,EAAe,gBAAiB,CACxD,aAAc,MACd,aAAc,GAClB,CAAC,EAEYF,EAAO,CAChB,KAAM,SAAS,cAAc,OAAO,EACpC,YAAa,SAAS,eAAe,aAAa,EAClD,UAAW,SAAS,cAAc,QAAQ,EAC1C,QAAS,SAAS,cAAc,mBAAmB,EACnD,OAAQ,SAAS,cAAc,SAAS,EACxC,QAAS,SAAS,cAAc,UAAU,CAC9C,EAGO,IAAIT,EAAQ,GACRE,EAAc,EACdD,EAAY,GAEvBW,IACAC,IAEAJ,EAAK,KAAK,iBAAiB,SAAU,MAAMK,GAAS,CAKhD,GAJAA,EAAM,eAAc,EACpBZ,EAAc,EACdO,EAAK,QAAQ,UAAY,GACzBT,EAAQS,EAAK,YAAY,MAAM,KAAI,EAC/BT,IAAU,GACV,GAAI,CACA,MAAMK,EAAO,MAAMP,EAAUE,EAAOE,CAAW,EACzCa,EAAU,KAAK,KAAKV,EAAK,UAAYJ,CAAS,EACpDG,EAAOC,CAAI,EACXO,IACIV,GAAea,EACfF,IAEAG,GAEP,OAAQC,EAAO,CACZ,QAAQ,IAAIA,CAAK,EACjBX,EAAe,wCAAwC,EACvDO,GACH,MAEDP,EAAe,cAAc,EAC7BO,IAEJJ,EAAK,KAAK,OACd,CAAC,EACDA,EAAK,QAAQ,iBAAiB,QAAS,MAAMS,GAAmB,CAC5DhB,GAAe,EACf,GAAI,CACA,MAAMG,EAAO,MAAMP,EAAUE,EAAOE,CAAW,EAC/CU,IACAR,EAAOC,CAAI,EACXW,IAEA,MAAMG,EADO,SAAS,cAAc,eAAe,EACjC,wBAClB,OAAO,SAAS,CACZ,IAAKA,EAAK,OAAS,EACnB,SAAU,QACtB,CAAS,EACD,MAAMJ,EAAU,KAAK,KAAKV,EAAK,UAAYJ,CAAS,EAChDC,GAAea,GACfF,GAEP,OAAQI,EAAO,CACZ,QAAQ,IAAIA,CAAK,EACjBX,EAAe,wCAAwC,EACvDO,GACH,CACL,CAAC,EAGM,SAASP,EAAec,EAAS,CACpCC,EAAS,MAAM,CACX,MAAO,QACP,QAASD,EACT,SAAU,WACV,gBAAiB,KACzB,CAAK,CACL,CAEO,SAASR,GAAa,CACzBH,EAAK,OAAO,MAAM,QAAU,MAChC,CAEO,SAASN,GAAa,CACzBM,EAAK,OAAO,MAAM,QAAU,OAChC,CAEA,SAASI,GAAc,CACnBJ,EAAK,QAAQ,MAAM,QAAU,MACjC,CAEA,SAASO,GAAc,CACnBP,EAAK,QAAQ,MAAM,QAAU,OACjC"}